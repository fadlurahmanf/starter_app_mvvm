on:
  push:
    branches: [ master ]
name: "CI CD KOTLIN"

jobs:
  build:
    runs-on: ubuntu-latest
    steps:
      - name: CHECKOUT
        uses: actions/checkout@v3
      - name: CHECK FOLDER
        run: ls
      - name: CREATE LOCAL PROPERTIES
        run: touch local.properties
      - name: CHECK FOLDER
        run: ls
      - name: ACCESS BASE DEV URL
        env:
          BASE_DEV_URL: ${{ secrets.BASE_DEV_URL }}
        run: echo BASE_DEV_URL="BASE_DEV_URL" >> local.properties
      - name: ACCESS BASE STAGING URL
        env:
          BASE_STAGING_URL: ${{ secrets.BASE_STAGING_URL }}
        run: echo BASE_STAGING_URL="BASE STAGING" >> local.properties
      - name: ACCESS BASE PRODUCTION URL
        env:
          BASE_PRODUCTION_URL: ${{ secrets.BASE_PRODUCTION_URL }}
        run: echo BASE_PRODUCTION_URL="BASE PRODUCTION" >> local.properties
      - name: ACCESS PUBLIC KEY DEV
        env:
          PUBLIC_KEY_DEV: ${{ secrets.PUBLIC_KEY_DEV }}
        run: echo PUBLIC_KEY_DEV="PUBLIC KEY" >> local.properties
      - name: ACCESS PRIVATE KEY DEV
        env:
          PRIVATE_KEY_DEV: ${{ secrets.PRIVATE_KEY_DEV }}
        run: echo PRIVATE_KEY_DEV="PRIVATE KEY" >> local.properties
      - name: UNIT-TEST
        run: ./gradlew test
#      - name: Setup JDK
#        uses: actions/setup-java@v1
#        with:
#          java-version: '12.x'
#      - name: Grant execute permission for gradlew
#        run: chmod +x gradlew
#      - name: Build with gradle
#        run: ./gradlew assembleDebug
#      - name: Push to Releases
#        uses: ncipollo/release-action@v1
#        with:
#          artifacts: "app/build/outputs/apk/debug/*"
#          tag: v1.0.${{ github.run_number }}
#          token: ${{ secrets.CI_DEMO }}
